<div class='container'>
  <% @users.each do |u|  %>

    <div>
      <%= link_to u.email , user_path(u) %>
    </div>

    <div>
      <%= form_for @request do |r| %>
      <%= r.hidden_field :invitor_id, value: current_user.id%>
      <%= r.hidden_field :invitee_id, value: u.id %>
      <%= r.hidden_field :accepted, value: false %>

      <!-- check for followees before running condition-->

      <% if current_user.followees.count > 0 %>
        <!-- dont allow user to request themselves or request someone already followed-->
        <% current_user.followees.each do |f| %>

          <% if f.email != u.email && u.email != current_user.email %>
          <% if !current_user.sent_requests.nil? %>
            <% current_user.sent_requests.each do |sent_request| %>
              <% if u.id != sent_request.invitee_id %>
                <%= r.submit "Request Friend"%>
              <% else %>
                <%= r.submit "Request Friend", :style => "display: none;" %>
              <% end %>
            <% end %>
          <% end %>
        <% end %>
        <% end %>
      <% end %>
    <% end %>
  </div>

<% end %>
</div>
